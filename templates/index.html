<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prospector - Job Application Tracker</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="toast-container" id="toast-container"></div>
    
    <div class="container">
        <header>
            <h1>ðŸŽ¯ Prospector</h1>
            <p>AI-Powered Job Application Tracker & Lead Finder</p>
        </header>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('applications', event)" data-tab="applications">Job Applications</button>
            <button class="tab" onclick="switchTab('leads', event)" data-tab="leads">Job Leads</button>
            <button class="tab" onclick="switchTab('resume', event)" data-tab="resume">Resume</button>
        </div>
        
        <!-- Job Applications Tab -->
        <div id="applications-tab" class="tab-content active">
            <div class="section-header">
                <h2>Job Applications</h2>
                <button class="add-button" onclick="toggleForm('application-form')">
                    <span>+ Add Application</span>
                </button>
            </div>
            
            <div id="application-form" class="form-container collapsed">
                <h3 style="color: #8a9aff; margin-bottom: 1.5rem;">Add New Application</h3>
                <form id="application-form-element">
                    <div class="form-group">
                        <label for="app-company">Company Name *</label>
                        <input type="text" id="app-company" required>
                    </div>
                    <div class="form-group">
                        <label for="app-role">Role Name *</label>
                        <input type="text" id="app-role" required>
                    </div>
                    <div class="form-group">
                        <label for="app-stage">Stage</label>
                        <select id="app-stage">
                            <option value="not_started">Not Started</option>
                            <option value="applied">Applied</option>
                            <option value="in_progress">In Progress</option>
                            <option value="offer">Offer</option>
                            <option value="rejected">Rejected</option>
                            <option value="no_answer">No Answer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="app-job-ad">Job Ad</label>
                        <textarea id="app-job-ad"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="app-notes">Notes</label>
                        <textarea id="app-notes"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="app-match">Match Percentage</label>
                        <input type="number" id="app-match" min="0" max="100" step="0.1">
                    </div>
                    <div class="btn-group">
                        <button type="submit">Add Application</button>
                        <button type="button" class="secondary" onclick="toggleForm('application-form')">Cancel</button>
                    </div>
                </form>
            </div>
            
            <div class="filter-group">
                <label>Filter by Stage:</label>
                <select id="stage-filter" onchange="loadApplications()">
                    <option value="">All Stages</option>
                    <option value="not_started">Not Started</option>
                    <option value="applied">Applied</option>
                    <option value="in_progress">In Progress</option>
                    <option value="offer">Offer</option>
                    <option value="rejected">Rejected</option>
                    <option value="no_answer">No Answer</option>
                </select>
            </div>
            
            <div id="applications-list"></div>
        </div>
        
        <!-- Job Leads Tab -->
        <div id="leads-tab" class="tab-content">
            <div class="section-header">
                <h2>Job Leads</h2>
                <button class="add-button" onclick="toggleForm('lead-form')">
                    <span>+ Add Lead</span>
                </button>
            </div>
            
            <div id="lead-form" class="form-container collapsed">
                <h3 style="color: #8a9aff; margin-bottom: 1.5rem;">Add New Job Lead</h3>
                <form id="lead-form-element">
                    <div class="form-group">
                        <label for="lead-company">Company Name *</label>
                        <input type="text" id="lead-company" required>
                    </div>
                    <div class="form-group">
                        <label for="lead-role">Role Name *</label>
                        <input type="text" id="lead-role" required>
                    </div>
                    <div class="form-group">
                        <label for="lead-posting">Job Posting *</label>
                        <textarea id="lead-posting" required style="min-height: 200px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="lead-source">Source</label>
                        <input type="text" id="lead-source" placeholder="e.g., LinkedIn, Indeed">
                    </div>
                    <div class="form-group">
                        <label for="lead-url">URL</label>
                        <input type="url" id="lead-url">
                    </div>
                    <div class="btn-group">
                        <button type="submit">Add Lead & Rank</button>
                        <button type="button" class="secondary" onclick="submitLead(false)">Add Lead Only</button>
                        <button type="button" class="secondary" onclick="toggleForm('lead-form')">Cancel</button>
                    </div>
                </form>
            </div>
            
            <div class="sort-controls">
                <label>
                    <input type="checkbox" id="sort-by-match" checked onchange="loadLeads()">
                    Sort by Match Percentage
                </label>
            </div>
            
            <div id="leads-list"></div>
        </div>
        
        <!-- Resume Tab -->
        <div id="resume-tab" class="tab-content">
            <div class="section-header">
                <h2>Resume Management</h2>
                <button class="add-button" onclick="toggleForm('resume-form')">
                    <span>+ Add Resume</span>
                </button>
            </div>
            
            <div id="resume-form" class="form-container collapsed">
                <h3 style="color: #8a9aff; margin-bottom: 1.5rem;">Upload/Add Resume</h3>
                <form id="resume-form-element">
                    <div class="form-group">
                        <label for="resume-content">Resume Content *</label>
                        <textarea id="resume-content" required style="min-height: 300px;" placeholder="Paste your resume text here..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="resume-filename">Filename (optional)</label>
                        <input type="text" id="resume-filename" placeholder="e.g., john_doe_resume.txt">
                    </div>
                    <div class="btn-group">
                        <button type="submit">Save as Active Resume</button>
                        <button type="button" class="secondary" onclick="toggleForm('resume-form')">Cancel</button>
                    </div>
                </form>
            </div>
            
            <div id="active-resume-display"></div>
        </div>
    </div>
    
    <script src="/static/js/app.js"></script>
</body>
</html>
